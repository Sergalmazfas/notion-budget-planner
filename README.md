# notion-budget-planner
üöÄ buget planner based on notion api. Build with create-react-app and express

---

## üìÑ **–ü—Ä–∞–≤–∏–ª–∞ –¥–µ–ø–ª–æ—è –ø—Ä–æ–µ–∫—Ç–∞ `notion-budget-planner`**

### üìù **1Ô∏è‚É£ –ö—É–¥–∞ –¥–µ–ø–ª–æ–∏–º—Å—è:**

* Google Cloud Run —Å–µ—Ä–≤–∏—Å:

  * –ò–º—è —Å–µ—Ä–≤–∏—Å–∞: `notion`
  * –†–µ–≥–∏–æ–Ω: `us-east1`
  * URL —Å–µ—Ä–≤–∏—Å–∞: `https://notion-<PROJECT_NUMBER>.run.app`
    *(–ø—Ä–∏–º–µ—Ä: [https://notion-1005781479849.us-east1.run.app](https://notion-1005781479849.us-east1.run.app))*

* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ –≤ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:

  ```
  https://github.com/Sergalmazfas/notion-budget-planner
  ```

---

### üõ† **2Ô∏è‚É£ –ö–∞–∫ –¥–µ–ø–ª–æ–∏–º—Å—è (CI/CD):**

#### ‚ö° **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π:**

* –ü—Ä–∏ –ª—é–±–æ–º push –≤ –≤–µ—Ç–∫—É `main` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç Cloud Build Trigger:

  * –®–∞–≥ 1: –°–±–æ—Ä–∫–∞ Docker image.
  * –®–∞–≥ 2: –ü—É–±–ª–∏–∫–∞—Ü–∏—è Docker image –≤ Artifact Registry.
  * –®–∞–≥ 3: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –≤ —Å–µ—Ä–≤–∏—Å `notion` –≤ Cloud Run.

–í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–µ–ø–ª–æ—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã –≤ `cloudbuild.yaml`:

* –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Secrets –∏–∑ Google Cloud Secret Manager:

  * `NOTION_TOKEN`
  * `DATABASE_ID`
* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `service-account`:
  `1005781479849-compute@developer.gserviceaccount.com`

---

#### üöÄ **–†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π (–ø–æ –∑–∞–ø—Ä–æ—Å—É):**

–î–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –ø–∞–π–ø–ª–∞–π–Ω–∞:

```bash
gcloud builds submit --config cloudbuild.yaml .
```

–≠—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç —Ç–æ—Ç –∂–µ —Å–∞–º—ã–π build + deploy workflow, —á—Ç–æ –∏ Trigger.

---

### üîí **3Ô∏è‚É£ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤:**

–í Cloud Run —Å–µ—Ä–≤–∏—Å–µ `notion` –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —Å–µ–∫—Ä–µ—Ç—ã –∏–∑ Google Cloud Secret Manager:

* `NOTION_TOKEN`: API —Ç–æ–∫–µ–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Notion.
* `DATABASE_ID`: ID –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö Notion.

–°–µ–∫—Ä–µ—Ç—ã **–Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏** ‚Äî —Ç–æ–ª—å–∫–æ –≤ Secret Manager.

---

## üîé **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–µ—Ä–≤–∏—Å–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:**

‚úÖ **–®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –¥–µ–ø–ª–æ—è**

* –ü–µ—Ä–µ–π—Ç–∏ –≤ Google Cloud Console ‚Üí Cloud Run ‚Üí —Å–µ—Ä–≤–∏—Å `notion`.
* –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–æ—è–≤–∏–ª–∞—Å—å –Ω–æ–≤–∞—è —Ä–µ–≤–∏–∑–∏—è (`Revision`) —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º –≤—Ä–µ–º–µ–Ω–µ–º –¥–µ–ø–ª–æ—è.

---

‚úÖ **–®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ–∫—Ä–µ—Ç–∞**

* –í —Ä–∞–∑–¥–µ–ª–µ "Environment variables & Secrets":

  * –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω—ã:

    * `NOTION_TOKEN`: –∏–∑ Secret Manager
    * `DATABASE_ID`: –∏–∑ Secret Manager
  * –î–æ–ª–∂–Ω–æ –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ `NODE_ENV=production`.

---

‚úÖ **–®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–∞**

* –û—Ç–∫—Ä—ã—Ç—å URL —Å–µ—Ä–≤–∏—Å–∞:

  ```
  https://notion-<PROJECT_NUMBER>.run.app
  ```

  –ü—Ä–∏–º–µ—Ä:

  ```
  https://notion-1005781479849.us-east1.run.app
  ```

* –°–µ—Ä–≤–∏—Å –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ (`HTTP 200` –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∏–ª–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π API –æ—Ç–≤–µ—Ç).

---

‚úÖ **–®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Notion**

* –î–æ–ª–∂–Ω—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –∑–∞–ø–∏—Å–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –≤ Notion,
  –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ª–æ–≥–∏–∫–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (`notion-budget-planner`).

---

## üí° **–í–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞:**

* **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**: –æ–Ω–∏ –≤—Å–µ–≥–¥–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ Secret Manager.
* –í—Å–µ –¥–µ–ø–ª–æ–∏ –≤ —Å–µ—Ä–≤–∏—Å `notion` –¥–æ–ª–∂–Ω—ã –∏–¥—Ç–∏ —á–µ—Ä–µ–∑ CI/CD pipeline (Trigger –∏–ª–∏ —Ä—É—á–Ω–æ–π `gcloud builds submit`).
* –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `PORT` –≤ `--set-env-vars` ‚Äî Cloud Run —Å–∞–º —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —ç—Ç—É –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é.
